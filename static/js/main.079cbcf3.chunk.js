(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{192:function(e,t,a){e.exports=a(412)},213:function(e,t){},235:function(e,t){},237:function(e,t){},301:function(e,t){},412:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=a.n(l),o=a(12),i=a(49),s=a(27),u=a(15),m=Object(o.c)((function(e){var t=e.app;return{authenticatedAs:t.auth.permissions.length>0&&t.domain,showRegister:t.auth.permissions.includes("REGISTRANT"),showAdmin:t.auth.permissions.includes("NODE_OWNER")}}))((function(e){var t=e.authenticatedAs,a=e.showRegister,n=e.showAdmin;return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light fixed-top"},r.a.createElement("div",{className:"container"},r.a.createElement(u.a,{className:"navbar-brand",to:"/"},r.a.createElement("img",{src:"assets/img/logo.svg",className:"logo",alt:"logo"})),r.a.createElement("h3",null,"Subdomain batch"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarsExampleDefault"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(u.a,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.a,{className:"nav-link",to:"/setup"},"Setup")),a&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.a,{className:"nav-link",to:"/subdomains"},"Register subdomains")),n&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.a,{className:"nav-link",to:"/admin"},"Admin")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.a,{className:"nav-link",to:"/faq"},"FAQ")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.a,{className:"btn btn btn-primary my-2 my-sm-0",to:t?"":"/login"},t||"Login"))))))})),d=a(414),E=a(415),p=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer-top"},r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("img",{src:"assets/img/powered_by_iov.svg",className:"img-fluid powered_by",alt:"powered_by"})),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("span",{className:"footer-title mb-3"},"What is RNS?"),r.a.createElement("p",{className:"mb-5"},"RIF Name Service provides an architecture which enables the identification of blockchain addresses by human-readable names.")),r.a.createElement("div",{className:"col-lg-3"}),r.a.createElement("div",{className:"col-lg-3"}),r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("a",{href:"https://gitter.im/rsksmart/rif-name-service",target:"_blank",rel:"noopener noreferrer"},"Gitter"),r.a.createElement("a",{href:"https://rsksamrt.github.io/rif.rns/tools/subdomain-batch",target:"_blank",rel:"noopener noreferrer"},"Docs"),r.a.createElement("a",{href:"https://github.com/rnsdomains/rns-subdomain-batch",target:"_blank",rel:"noopener noreferrer"},"Issues"))))))},h=a(33),b=a(34),f=a(36),g=a(35),v=a(18),R=a(37),y=a(182),w=a(421),O=a(183),N=a(416),x=a(184),T=a(422),j=function(e){return e.length>0&&!!e.match(/^[a-z0-9]+$/i)},S=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={label:"",valid:!0},a.handleChangeLabel=a.handleChangeLabel.bind(Object(v.a)(a)),a}return Object(R.a)(t,e),Object(b.a)(t,[{key:"handleChangeLabel",value:function(e){var t=e.target.value;this.setState({label:t,valid:j(t)})}},{key:"render",value:function(){var e=this.state,t=e.label,a=e.valid;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"col-lg-12 text-center main-title-box"},r.a.createElement("h1",null,r.a.createElement("b",null,"RNS Subdomains")),r.a.createElement("p",null,"Use this tool to create subdomains in batch."),r.a.createElement("hr",null),r.a.createElement("h2",null,"Requirements"),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement("h3",null,"Browser wallet"),r.a.createElement("a",{href:"https://chrome.google.com/webstore/detail/nifty-wallet/jbdaocneiiinmjbjlgalhcelgbejmnid",target:"_blank",rel:"noopener noreferrer"},"Nifty Wallet")," (recommended) or ",r.a.createElement("a",{href:"https://metamask.io",target:"_blank",rel:"noopener noreferrer"},"Metamask"))),r.a.createElement("hr",null),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement("h3",null,"An RNS domain"),r.a.createElement(w.a,{onSubmit:function(e){e.preventDefault(),a&&window.open("https://manager.rns.rifos.org/search?domain=".concat(t))},method:"get",target:"_blank"},r.a.createElement(O.a,null,r.a.createElement(N.a,null,r.a.createElement(x.a,{type:"text",onChange:this.handleChangeLabel,className:!a&&"is-invalid"}),r.a.createElement(N.a.Append,null,r.a.createElement(N.a.Text,null,".rsk")),r.a.createElement(N.a.Append,null,r.a.createElement(T.a,{type:"submit"},"Register"))),!a&&r.a.createElement(w.a.Text,{className:"text-muted"},"Only lower cases or numbers."))),r.a.createElement("i",null,"Skip this if you already own one with your browser wallet."))),r.a.createElement("hr",null),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement("h3",null,"Setup"),r.a.createElement(u.a,{to:"/setup"},"Setup")," your domain to register subdomains in batch"))))}}]),t}(n.Component),_=a(420),A=a(418),C=a(417),k=a(51),I=a.n(k),L=a(39),D=a.n(L),F=function(e){return{type:"ERROR_VALIDATE_OWNERSHIP",error:e}},V=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={value:""},a.validate=a.validate.bind(Object(v.a)(a)),a.handleChangeValue=a.handleChangeValue.bind(Object(v.a)(a)),a}return Object(R.a)(t,e),Object(b.a)(t,[{key:"handleChangeValue",value:function(e){this.setState({value:e.target.value}),(0,this.props.clean)()}},{key:"validate",value:function(e){e.preventDefault();var t=this.props.validate;t(this.state.value)}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.error;return r.a.createElement(w.a,{onSubmit:this.validate},r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Label,null,"Choose the domain to register subdomains of"),r.a.createElement(N.a,null,r.a.createElement(x.a,{type:"text",placeholder:"domain.rsk",disabled:t,onChange:this.handleChangeValue}),r.a.createElement(N.a.Append,null,r.a.createElement(T.a,{type:"submit",disabled:t},"Validate"))),t&&r.a.createElement(C.a,{variant:"grow"}),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("small",{className:"text-danger"},a),r.a.createElement("br",null),r.a.createElement("small",null,"Check you are connected to RSK network with",r.a.createElement("span",null," "),"the owner&aposs wallet unlocked."))))}}]),t}(n.Component),U=Object(o.c)((function(e){return{loading:e.app.validateOwnership.loading,error:e.app.validateOwnership.error}}),(function(e){return{validate:function(t){return e(function(e){return function(t){t({type:"REQUEST_VALIDATE_OWNERSHIP"});var a,n=new(new I.a("https://public-node.rsk.co/").eth.Contract)([{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],"0xcb868aeabd31e2b66f74e9a55cf064abb31a4ad5"),r=D.a.hash(e);return window.ethereum.enable().then((function(e){a=e[0].toLowerCase()})).then((function(){return n.methods.owner(r).call()})).then((function(n){var r=n.toLowerCase();t(r===a?function(e,t){return{type:"RECEIVE_VALIDATE_OWNERSHIP",domain:e,owner:t}}(e,r):F("Not domain's owner"))})).catch(F)}}(t))},clean:function(){return e({type:"CLEAN_VALIDATE_OWNERSHIP"})}}}))(V),G=a(10),H=function(e){var t=e.tx;return r.a.createElement("a",{href:"".concat("https://explorer.rsk.co","/tx/").concat(t),target:"_blank",rel:"noopener noreferrer"},t)},M=Object(o.c)((function(e){var t=e.app;return Object(G.a)({},t.claim,{domain:t.domain,from:t.owner})}),(function(e){return{claim:function(t,a){return e(function(e,t){return function(a){a({type:"REQUEST_CLAIM"});var n=new(new I.a(window.web3).eth.Contract)([{constant:!1,inputs:[{name:"node",type:"bytes32"}],name:"claim",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],"0x1867670c5eee8a850462ffb5d7b5f4eb25b0ffab"),r=D.a.hash(e);return n.methods.claim(r).send({from:t}).then((function(e){return a(function(e){return{type:"RECEIVE_CLAIM",tx:e}}(e))})).catch((function(e){return a(function(e){return{type:"ERROR_CLAIM",error:e}}(e))}))}}(t,a))}}}),(function(e,t,a){return Object(G.a)({},a,{},e,{claim:function(){return t.claim(e.domain,e.from)}})}))((function(e){var t=e.claim,a=e.claiming,n=e.tx,l=e.error;return r.a.createElement(w.a,{onSubmit:function(e){e.preventDefault(),t()}},!n&&r.a.createElement(O.a,null,r.a.createElement(T.a,{type:"submit",disabled:a},"Claim")),n&&r.a.createElement("small",{className:"text-success"},r.a.createElement(H,{tx:n.transactionHash})),l&&r.a.createElement("small",{className:"text-danger"},l.message))})),P=Object(o.c)((function(e){var t=e.app;return Object(G.a)({},t.transferToRegistrar,{domain:t.domain,from:t.owner})}),(function(e){return{transfer:function(t,a){return e(function(e,t){return function(a){a({type:"REQUEST_TRANSFER_TO_REGISTRAR"});var n=new(new I.a(window.web3).eth.Contract)([{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ownerAddress",type:"address"}],name:"setOwner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],"0xcb868aeabd31e2b66f74e9a55cf064abb31a4ad5"),r=D.a.hash(e);return n.methods.setOwner(r,"0x1867670c5eee8a850462ffb5d7b5f4eb25b0ffab").send({from:t}).then((function(e){return a(function(e){return{type:"RECEIVE_TRANSFER_TO_REGISTRAR",tx:e}}(e))})).catch((function(e){return a(function(e){return{type:"ERROR_TRANSFER_TO_REGISTRAR",error:e}}(e))}))}}(t,a))}}}),(function(e,t,a){return Object(G.a)({},a,{},e,{transfer:function(){return t.transfer(e.domain,e.from)}})}))((function(e){var t=e.enabled,a=e.transfer,n=e.transferring,l=e.tx,c=e.error,o=!t||n;return r.a.createElement(w.a,{onSubmit:function(e){e.preventDefault(),a()}},!l&&r.a.createElement(O.a,null,r.a.createElement(T.a,{type:"submit",className:o&&"btn-info",disabled:o},"Transfer")),l&&r.a.createElement("small",{className:"text-success"},r.a.createElement(H,{tx:l.transactionHash})),c&&r.a.createElement("small",{className:"text-danger"},c.message))})),W=Object(o.c)((function(e){var t=e.app;return{domain:t.domain,claimed:!!t.claim.tx,transferred:!!t.transferToRegistrar.tx}}))((function(e){var t=e.domain,a=e.claimed,n=e.transferred;return r.a.createElement(d.a,{className:"text-center"},r.a.createElement("div",{className:"col-lg-12 main-title-box"},r.a.createElement("h1",null,r.a.createElement("b",null,"Setup"))),r.a.createElement("p",null,"The setup process consist of transferring the domain momentarily to the subdomain registrar, a smart contract that allows to register subdomains to selected operators."),r.a.createElement(E.a,null,r.a.createElement(y.a,null,t?r.a.createElement("h2",null,t):r.a.createElement(U,null))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement("p",null,"Now you have to execute 2 transactions. You will need to do this just once."),r.a.createElement("p",null,"Claim your domain"," ",r.a.createElement(_.a,{placement:"top",overlay:r.a.createElement(A.a,{id:"tooltip1-top"},"Claim your domain in the batch registrar contract. This will set you as the",r.a.createElement("span",null," "),"admin of the domain and the only registrant. Will also give you permission to",r.a.createElement("span",null," "),"add ore remove other registrants, and recover your domain ownership.")},r.a.createElement("span",{className:"text-info"}," ?"))),r.a.createElement(M,null),r.a.createElement("p",null,"Transfer ownership to Subdomain Registrar."," ",r.a.createElement(_.a,{placement:"top",overlay:r.a.createElement(A.a,{id:"tooltip2-top"},"This will set the smart contract as the owner of the RNS domain.",r.a.createElement("span",null," "),"You can recover your domain ownership when you want to.")},r.a.createElement("span",{className:"text-info"}," ?"))),r.a.createElement(P,{enabled:a})))),t&&n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("p",null,"Done!"),r.a.createElement("p",null,"Please ",r.a.createElement(u.a,{to:"/subdomains"},"validate your csv files")," before executing any registration.")))})),Q=a(191),q=a(419),B=a(188),J=a.n(B),K=a(17),Y=a(14),$=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={validating:!1,data:null,allSolvedConflicts:[],allUnsolvedConflicts:[],parsed:null},a.handleUploadFile=a.handleUploadFile.bind(Object(v.a)(a)),a.accept=a.accept.bind(Object(v.a)(a)),a.handleDownloadParsed=a.handleDownloadParsed.bind(Object(v.a)(a)),a.accept=a.accept.bind(Object(v.a)(a)),a}return Object(R.a)(t,e),Object(b.a)(t,[{key:"handleUploadFile",value:function(e){this.setState({validating:!0});for(var t=[],a=[],n=[],r=0;r<e.length;r+=1){var l=Object(Q.a)(e[r],2),c=l[0],o=l[1],i={},s={};c.indexOf(" ")>=0&&(c=c.replace(/ /g,""),i.labelNoSpaces=!0),c!==c.toLowerCase()&&(c=c.toLowerCase(),i.labelToLower=!0);var u=c.indexOf("@");u>=0&&(c=c.slice(0,u),i.noMails=!0),c.indexOf("\xf1")>=0&&(c=c.replace(/(\xf1)/g,"n"),i.labelsNoEnie=!0),c.match(/[-_.,]/g)&&(c=(c=(c=(c=c.replace(/(\.)/g,"")).replace(/(_)/g,"")).replace(/(-)/g,"")).replace(/(,)/g,""),i.noSeparators=!0),c.match(/[\xe1\xe9\xed\xf3\xfa\xfc]/g)&&(c=(c=(c=(c=(c=(c=c.replace(/(\xe1)/g,"a")).replace(/(\xe9)/g,"e")).replace(/(\xed)/g,"i")).replace(/(\xf3)/g,"o")).replace(/(\xfa)/g,"u")).replace(/(\xfc)/g,"u"),i.noTilde=!0),o=o.toLowerCase(),Object(K.isAddress)(o)||(s.invalidAddress=!0),j(c)||(s.invalidLabel=!0),t.push(i),a.push(s),n.push([c,o])}this.setState({validating:!1,data:e,allSolvedConflicts:t,allUnsolvedConflicts:a,parsed:n})}},{key:"handleDownloadParsed",value:function(){var e=this.state.parsed;!function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("subdomains-".concat(Date.now(),".csv"),function(e){for(var t="",a=0;a<e.length;a+=1)t+="".concat(e[a][0],",").concat(e[a][1],"\n");return t}(e))}},{key:"accept",value:function(){var e=this.props,t=e.confirmParsed,a=e.goToRegister;t(function(e){for(var t=[],a=[],n=0;n<e.length;n+=1)t.push(Object(K.sha3)(e[n][0])),a.push(e[n][1]);for(var r=Math.floor(t.length/50),l=[],c=0;c<r;c+=1)l.push({from:50*c,to:50*(c+1),value:[t.slice(50*c,50*(c+1)),a.slice(50*c,50*(c+1))]});return l.push({from:50*r,to:t.length,value:[t.slice(50*r,t.length),a.slice(50*r,a.length)]}),l}(this.state.parsed)),a()}},{key:"render",value:function(){var e=this.state,t=e.validating,a=e.data,n=e.allSolvedConflicts,l=e.allUnsolvedConflicts,c=e.parsed,o=l.length>0&&l.some((function(e){return Object.keys(e).length>0})),i=this.props.domain;return r.a.createElement(d.a,{className:"text-center"},r.a.createElement("div",{className:"col-lg-12 main-title-box"},r.a.createElement("h1",null,r.a.createElement("b",null,"Register subdomains"))),r.a.createElement("p",null,"Register subdomains importing a ",r.a.createElement("code",null,"csv")," file."),r.a.createElement("p",null,"The"," ",r.a.createElement("code",null,"csv")," ","file must include only two columns: the labels to register in the first column and the address to set in the second column."),r.a.createElement("p",null,"First validate the entries. The app will apply some changes",r.a.createElement("span",null," "),"and request to approve them before registering."),r.a.createElement(J.a,{onFileLoaded:this.handleUploadFile,disabled:t}),t&&r.a.createElement(C.a,{animation:"grow"}),!t&&c&&(o?r.a.createElement("p",null,"Some format conflict was found and not solved. Subdomains Subdomains must be lowercase alfanumeric values and addresses must be 20 bytes hex."):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"All found conflicts were solved. ",r.a.createElement(T.a,{variant:"link",onClick:this.handleDownloadParsed},"Download")," the resultant ",r.a.createElement("code",null,"csv")," file."),r.a.createElement(T.a,{onClick:this.accept},"Register!"))),r.a.createElement("hr",null),!t&&c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Check all solved conflicts in yellow and unsolved in red."),r.a.createElement(q.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"input"),r.a.createElement("th",null,"solved conflicts"),r.a.createElement("th",null,"unsolved conflicts"),r.a.createElement("th",null,"to register"))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:"".concat(e[1]).concat(t),className:Object.keys(l[t]).length>0?"table-danger":Object.keys(n[t]).length>0?"table-warning":""},r.a.createElement("td",null,"(".concat(e[0],", ").concat(e[1],")")),r.a.createElement("td",null,function(e){var t=[];return e.labelNoSpaces&&t.push("No spaces"),e.labelToLower&&t.push("Lower cases"),e.noMails&&t.push("No mails"),e.labelsNoEnie&&t.push("No '\xf1'"),e.noSeparators&&t.push("No _ - . ,"),e.noTilde&&t.push("No '"),t.map((function(e){return r.a.createElement("p",{key:e},e,r.a.createElement("br",null))}))}(n[t])),r.a.createElement("td",null,function(e){var t=[];return e.invalidAddress&&t.push("Invalid address"),e.invalidLabel&&t.push("Invalid label"),t.map((function(e){return r.a.createElement("p",{key:e},e,r.a.createElement("br",null))}))}(l[t])),r.a.createElement("td",null,"(".concat(c[t][0],".").concat(i,", ").concat(c[t][1],")")))}))))),r.a.createElement("hr",null))}}]),t}(n.Component),z=Object(o.c)((function(e){return{domain:e.app.domain}}),(function(e){return{confirmParsed:function(t){return e(function(e){return{type:"CONFIRM_PARSED",parsed:e}}(t))},goToRegister:function(){return e(Object(Y.d)("/register"))}}}))($),X=Object(o.c)((function(e){var t=e.app;return{data:t.parsed,domain:t.domain,owner:t.owner,registerResults:t.register}}),(function(e){return{register:function(t,a,n,r,l){return e(function(e,t,a,n,r){return function(l){l(function(e){return{type:"REQUEST_REGISTER",index:e}}(r));var c=new(new I.a(window.web3).eth.Contract)([{constant:!1,inputs:[{name:"rootNode",type:"bytes32"},{name:"labels",type:"bytes32[]"},{name:"addrs",type:"address[]"}],name:"register",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],"0x1867670c5eee8a850462ffb5d7b5f4eb25b0ffab"),o=D.a.hash(e);return c.methods.register(o,t,a).send({from:n}).then((function(e){return l(function(e,t){return{type:"RECEIVE_REGISTER",tx:e,index:t}}(e,r))})).catch((function(e){return l(function(e,t){return{type:"ERROR_REGISTER",error:e,index:t}}(e,r))}))}}(t,a,n,r,l))}}}),(function(e,t,a){return Object(G.a)({},a,{},e,{register:function(a,n,r){return t.register(e.domain,a,n,e.owner,r)}})}))((function(e){var t=e.register,a=e.data,n=e.registerResults;return r.a.createElement(d.a,{className:"text-center"},r.a.createElement("div",{className:"col-lg-12 main-title-box"},r.a.createElement("h1",null,r.a.createElement("b",null,"Execute registration"))),a.map((function(e,a){var l=n[a],c=l.tx,o=l.error,i=l.registering,s=l.index;return r.a.createElement(E.a,{key:s},r.a.createElement(y.a,null,"From ",e.from," to ",e.to),r.a.createElement(y.a,null,r.a.createElement(w.a,{onSubmit:function(a){a.preventDefault(),t(e.value[0],e.value[1],s)}},!c&&r.a.createElement(O.a,null,r.a.createElement(T.a,{type:"submit",disabled:i||c&&!!c.transactionHash},"Register")),c&&r.a.createElement("small",{className:"text-success"},r.a.createElement(H,{tx:c.transactionHash})),o&&r.a.createElement("small",{className:"text-danger"},o.message))))})))})),Z=function(){return r.a.createElement(d.a,null,r.a.createElement("div",{className:"col-lg-12 text-center main-title-box"},r.a.createElement("h1",null,r.a.createElement("b",null,"FAQ"))))},ee=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={value:""},a.authenticate=a.authenticate.bind(Object(v.a)(a)),a.handleChangeValue=a.handleChangeValue.bind(Object(v.a)(a)),a}return Object(R.a)(t,e),Object(b.a)(t,[{key:"handleChangeValue",value:function(e){this.setState({value:e.target.value})}},{key:"authenticate",value:function(e){e.preventDefault(),(0,this.props.auth)(this.state.value)}},{key:"render",value:function(){var e=this.props,t=e.authenticating,a=e.error,n=e.permissions,l=e.domain;return r.a.createElement(d.a,{className:"text-center"},r.a.createElement(E.a,null,r.a.createElement(y.a,null,0===n.length?r.a.createElement(w.a,{onSubmit:this.authenticate},r.a.createElement(w.a.Group,null,r.a.createElement(N.a,null,r.a.createElement(x.a,{type:"text",placeholder:"domain.rsk",disabled:t,onChange:this.handleChangeValue}),r.a.createElement(N.a.Append,null,r.a.createElement(T.a,{type:"submit",disabled:t},"Log in"))),t&&r.a.createElement(C.a,{variant:"grow"}),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("small",{className:"text-danger"},a),r.a.createElement("br",null),r.a.createElement("small",null,"Check you are connected to RSK network with",r.a.createElement("span",null," "),"the owner&aposs wallet unlocked.")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Welcome ",l,"!"),r.a.createElement(u.a,{className:"btn btn-success",to:"/subdomains"},"Register subdomains")))),r.a.createElement("hr",null),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement("p",null,"Please complete the",r.a.createElement("span",null," "),r.a.createElement(u.a,{to:"/setup"},"setup"),r.a.createElement("span",null," "),"before logging in."))))}}]),t}(n.Component),te=Object(o.c)((function(e){var t=e.app;return{permissions:t.auth.permissions,authenticating:t.auth.authenticating,error:t.auth.error,domain:t.domain}}),(function(e){return{auth:function(t){return e(function(e){return function(t){t({type:"REQUEST_AUTH"});var a,n=new(new I.a("https://public-node.rsk.co/").eth.Contract)([{constant:!0,inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"registrant",type:"address"}],name:"isRegistrant",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"nodeOwner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],"0x1867670c5eee8a850462ffb5d7b5f4eb25b0ffab"),r=D.a.hash(e),l=[];return window.ethereum.enable().then((function(e){a=e[0].toLowerCase()})).then((function(){return n.methods.isRegistrant(r,a).call()})).then((function(e){e&&l.push("REGISTRANT")})).then((function(){return n.methods.nodeOwner(r).call()})).then((function(e){e.toLowerCase()===a&&l.push("NODE_OWNER")})).then((function(){return t(function(e,t,a){return{type:"RECEIVE_AUTH",domain:e,owner:t,permissions:a}}(e,a,l))})).catch((function(e){return t(function(e){return{type:"ERROR_AUTH",error:e}}(e))}))}}(t))}}}))(ee),ae=function(){return r.a.createElement(d.a,{className:"text-center"},r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement("p",null,"404. Not found."))))},ne=function(){return r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement("div",{className:"col-lg-12 text-center main-title-box"},r.a.createElement("h1",null,r.a.createElement("b",null,"Admin"))),r.a.createElement(y.a,null,r.a.createElement("ul",null,r.a.createElement("li",null,"Add registrant"),r.a.createElement("li",null,"Remove registrant"),r.a.createElement("li",null,"Check registrant"),r.a.createElement("li",null,"Recover domain ownership")))),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement("p",null,"This section is in development. Find the",r.a.createElement("span",null," "),r.a.createElement("a",{href:"https://github.com/rnsdomains/rns-subdomain-batch/projects/1",target:"_blank",rel:"noopener noreferrer"},"Github project"),r.a.createElement("span",null," "),"to collaborate."))))},re=Object(o.c)((function(e){var t=e.app;return{showRegister:t.auth.permissions.includes("REGISTRANT"),showAdmin:t.auth.permissions.includes("NODE_OWNER")}}))((function(e){var t=e.showRegister,a=e.showAdmin;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(S,null)}}),r.a.createElement(s.b,{path:"/setup",render:function(){return r.a.createElement(W,null)}}),r.a.createElement(s.b,{path:"/subdomains",render:function(){return t?r.a.createElement(z,null):r.a.createElement(s.a,{to:"/login"})}}),r.a.createElement(s.b,{path:"/register",render:function(){return t?r.a.createElement(X,null):r.a.createElement(s.a,{to:"/login"})}}),r.a.createElement(s.b,{path:"/admin",render:function(){return a?r.a.createElement(ne,null):r.a.createElement(s.a,{to:"/login"})}}),r.a.createElement(s.b,{path:"/login",render:function(){return r.a.createElement(te,null)}}),r.a.createElement(s.b,{path:"/faq",render:function(){return r.a.createElement(Z,null)}}),r.a.createElement(s.b,{render:function(){return r.a.createElement(ae,null)}})),r.a.createElement(p,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=a(21),ce=a(38),oe=a(178),ie=a(189),se=(a(411),{domain:null,owner:null,validateOwnership:{enabled:!1,loading:!1,error:null},claim:{claiming:!1,tx:null,error:null},transferToRegistrar:{transferring:!1,tx:null,error:null},auth:{permissions:[],authenticating:!1,error:null},parsed:null,register:[]}),ue=function(e){return{index:e,tx:null,error:null,registering:!1}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_VALIDATE_OWNERSHIP":return Object(G.a)({},e,{domain:null,owner:null,validateOwnership:{loading:!0,error:null}});case"RECEIVE_VALIDATE_OWNERSHIP":return Object(G.a)({},e,{domain:t.domain,owner:t.owner,validateOwnership:{loading:!1,error:null}});case"ERROR_VALIDATE_OWNERSHIP":return Object(G.a)({},e,{domain:null,owner:null,validateOwnership:{loading:!1,error:t.error}});case"CLEAN_VALIDATE_OWNERSHIP":return Object(G.a)({},e,{domain:null,owner:null,validateOwnership:{loading:!1,error:null}});case"REQUEST_CLAIM":return Object(G.a)({},e,{claim:{claiming:!0,tx:null,error:null}});case"RECEIVE_CLAIM":return Object(G.a)({},e,{claim:{claiming:!1,tx:t.tx,error:null}});case"ERROR_CLAIM":return Object(G.a)({},e,{claim:{claiming:!1,tx:null,error:t.error}});case"REQUEST_TRANSFER_TO_REGISTRAR":return Object(G.a)({},e,{transferToRegistrar:{transferring:!0,tx:null,error:null}});case"RECEIVE_TRANSFER_TO_REGISTRAR":return Object(G.a)({},e,{transferToRegistrar:{transferring:!1,tx:t.tx,error:null},auth:{permissions:["NODE_OWNER","REGISTRANT"]}});case"ERROR_TRANSFER_TO_REGISTRAR":return Object(G.a)({},e,{transferToRegistrar:{transferring:!1,tx:null,error:t.error}});case"REQUEST_AUTH":return Object(G.a)({},e,{domain:null,auth:{authenticating:!0,permissions:[],error:null}});case"RECEIVE_AUTH":return Object(G.a)({},e,{domain:t.domain,owner:t.owner,auth:{authenticating:!1,permissions:t.permissions,error:null}});case"ERROR_AUTH":return Object(G.a)({},e,{domain:null,auth:{authenticating:!1,permissions:[],error:t.error}});case"CONFIRM_PARSED":for(var a=[],n=0;n<t.parsed.length;n+=1)a.push(ue(n));return Object(G.a)({},e,{parsed:t.parsed,register:a});case"REQUEST_REGISTER":return Object(G.a)({},e,{register:e.register.map((function(e){return e.index===t.index?{index:e.index,tx:null,error:null,registering:!0}:e}))});case"RECEIVE_REGISTER":return Object(G.a)({},e,{register:e.register.map((function(e){return e.index===t.index?{index:e.index,tx:t.tx,error:null,registering:!1}:e}))});case"ERROR_REGISTER":return Object(G.a)({},e,{register:e.register.map((function(e){return e.index===t.index?{index:e.index,tx:null,error:t.error,registering:!1}:e}))});default:return e}},de=function(e){return Object(ce.c)({router:Object(i.b)(e),app:me})},Ee=Object(le.a)({basename:"/rns-subdomain-batch"}),pe=[ie.a,Object(oe.a)(Ee)];var he,be=Object(ce.e)(de(Ee),he,Object(ce.d)(ce.a.apply(void 0,pe)));c.a.render(r.a.createElement(o.a,{store:be},r.a.createElement(i.a,{history:Ee},r.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[192,1,2]]]);
//# sourceMappingURL=main.079cbcf3.chunk.js.map